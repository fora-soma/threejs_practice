<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>Three sample6</title>
    <script src="https://unpkg.com/three@0.131.3/build/three.min.js"></script>
    <script>
      // ページの読み込みを待つ
      window.addEventListener("load", init);

      function init() {
        const canvas = document.querySelector("#myCanvas");
        // サイズを指定
        const width = canvas.width;
        const height = canvas.height;
        // レンダラーを作成
        const renderer = new THREE.WebGLRenderer({
          canvas: canvas,
        });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(width, height);

        // シーンを作成
        const scene = new THREE.Scene();

        // カメラを作成
        const camera = new THREE.PerspectiveCamera(60, 1920 / 1080);
        camera.position.set(0, 0, 935);

        // 図形を作成
        const geometry = new THREE.PlaneGeometry(1920, 1080);
        const material = new THREE.MeshBasicMaterial({
          side: THREE.DoubleSide,
          transparent: true,
          opacity: 0.7,
          color: 0xff00ff,
        });

        // const material = new THREE.MeshStandardMaterial({ color: 0x0000ff });
        const plane = new THREE.Mesh(geometry, material);
        scene.add(plane);

        // 平行光源
        const light = new THREE.DirectionalLight(0xffffff);
        light.intensity = 2; // 光の強さを倍に
        light.position.set(1, 1, 1); // ライトの方向
        // シーンに追加
        scene.add(light);

        tick();
        // 毎フレーム時に実行されるループイベントです
        function tick() {
          // plane.position.z += 0.001;
          // plane.rotation.z += 0.01;
          renderer.render(scene, camera); // レンダリング
          requestAnimationFrame(tick);
        }
      }
    </script>
    <style>
      #container {
        display: flex;
      }
      #myVideo {
        visibility: hidden;
        width: 0;
        position: absolute;
      }
      #rangeContainer {
        display: flex;
        flex-flow: column;
      }
      #rangeContainer input[range] {
        flex: auto;
      }
    </style>
  </head>
  <body>
    <h1>Three.js Samples</h1>

    <nav class="nav nav-tabs">
      <a href="./sample1.html" class="nav-link">Sample1</a>
      <a href="./sample2.html" class="nav-link">Sample2</a>
      <a href="./sample3.html" class="nav-link">Sample3</a>
      <a href="./sample4.html" class="nav-link">Sample4</a>
      <a href="./sample5.html" class="nav-link">Sample5</a>
      <a href="./sample6.html" class="nav-link active">Sample6</a>
    </nav>

    <!-- Optional JavaScript; choose one of the two! -->

    <div id="container">
      <div class="">
        <p>
          1920x1080の板ポリゴンを画角いっぱいに表示するテスト。<br />FOV=60°のとき、カメラポジション(Z座標)は
          935.3
        </p>
        <img
          src="imgs/sample6.png"
          style="border: 1px solid black; width: 400px"
        />
      </div>
      <div>
        <canvas id="myCanvas" width="480" height="272"></canvas>
      </div>
    </div>
    <script>
      [...document.querySelectorAll("input[type=range]")].map((inputNode) => {
        inputNode.addEventListener("input", (e) => {
          const id = e.target.id;
          document.querySelector(`span#${id}_val`).textContent = e.target.value;
        });
        inputNode.dispatchEvent(new Event("input", { bubbles: true }));
        // console.log(inputNode);
      });
    </script>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
</html>
